<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Phân quyền dịch vụ</title>
    <th:block th:replace="base :: resource"></th:block>
    <th:block th:replace="fragments/table_sidebar :: resource"></th:block>
</head>
<body>
    <div th:replace="base :: header"></div>
    <div class="admin-wrapper">
        <div th:replace="fragments/table_sidebar :: tableSidebar"></div>
        <div class="main-content">
            <h2>Danh sách phân quyền dịch vụ</h2>
            <div class="table-responsive">
                <table class="table table-striped table-bordered align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>ID</th>
                            <th>Tên công ty</th>
                            <th>Loại dịch vụ</th>
                            <th>Trạng thái</th>
                            <th>Ngày tạo</th>
                            <th>Ngày cập nhật</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="perm, iStat : ${permissions}">
                            <td th:text="${iStat.index + 1}"></td>
                            <td th:text="${perm.id}"></td>
                            <td th:text="${perm.serviceProviderId.companyName}"></td>
                            <td th:text="${perm.serviceType}"></td>
                            <td th:text="${perm.state}"></td>
                            <td th:text="${#dates.format(perm.createdDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${#dates.format(perm.updatedDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td>
                                <a th:href="@{/admin/permission/update/{id}(id=${perm.id})}" class="btn btn-warning btn-sm" title="Duyệt/Cập nhật">
                                    <i class="bi bi-pencil-square"></i> Duyệt
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div th:replace="base :: footer"></div>
</body>
</html>