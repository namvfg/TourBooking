<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Giao dịch</title>
    <th:block th:replace="base :: resource"></th:block>
    <th:block th:replace="fragments/table_sidebar :: resource"></th:block>
</head>
<body>
    <div th:replace="base :: header"></div>
    <div class="admin-wrapper">
        <div th:replace="fragments/table_sidebar :: tableSidebar"></div>
        <div class="main-content">
            <h2>Danh sách giao dịch</h2>
            <div class="table-responsive">
                <table class="table table-striped table-bordered align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>Mã GD</th>
                            <th>Khách hàng</th>
                            <th>Dịch vụ</th>
                            <th>Số lượng</th>
                            <th>Loại thanh toán</th>
                            <th>Tổng tiền</th>
                            <th>Trạng thái TT</th>
                            <th>Ngày tạo</th>
                            <th>Ngày cập nhật</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="trans, iStat : ${transactions}">
                            <td th:text="${iStat.index + 1}"></td>
                            <td th:text="${trans.id}"></td>
                            <td th:text="${trans.userId.username}"></td>
                            <td th:text="${trans.servicePostId.name}"></td>
                            <td th:text="${trans.slotQuantity}"></td>
                            <td th:text="${trans.transactionType}"></td>
                            <td th:text="${#numbers.formatDecimal(trans.totalAmount, 0, 'COMMA', 2, 'POINT')}"></td>
                            <td th:text="${trans.paymentStatus}"></td>
                            <td th:text="${#dates.format(trans.createdDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td th:text="${#dates.format(trans.updatedDate, 'dd/MM/yyyy HH:mm')}"></td>
                            <td>
                                <a th:href="@{'/transaction/update/' + ${trans.id}}" class="btn btn-warning btn-sm" title="Cập nhật">
                                    <i class="bi bi-pencil-square"></i>
                                </a>
                                <a th:href="@{'/transaction/delete/' + ${trans.id}}" class="btn btn-danger btn-sm"
                                   title="Xóa" onclick="return confirm('Bạn có chắc chắn muốn xóa giao dịch này không?');">
                                    <i class="bi bi-trash"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div th:replace="base :: footer"></div>
</body>
</html>